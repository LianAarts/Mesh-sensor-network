\hypertarget{rd__22__wifi_8h}{}\doxysection{/\+Users/lian/\+Documents/\+Platform\+IO/\+Projects/rootselection/include/rd\+\_\+22\+\_\+wifi.h File Reference}
\label{rd__22__wifi_8h}\index{/Users/lian/Documents/PlatformIO/Projects/rootselection/include/rd\_22\_wifi.h@{/Users/lian/Documents/PlatformIO/Projects/rootselection/include/rd\_22\_wifi.h}}
{\ttfamily \#include $<$Arduino.\+h$>$}\newline
{\ttfamily \#include $<$Arduino\+Json.\+h$>$}\newline
{\ttfamily \#include $<$HTTPClient.\+h$>$}\newline
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{rd__22__wifi_8h_a433a2bfe9f984e7dbd6e66f7a251852d}{post}} (String sensor\+Val, String name, String unit)
\begin{DoxyCompactList}\small\item\em doxygen \end{DoxyCompactList}\item 
void \mbox{\hyperlink{rd__22__wifi_8h_aa400750636d4d4831176d9358a10ad2b}{split\+Json}} (String json)
\begin{DoxyCompactList}\small\item\em Split the received JSON in individual measurements so we can POST them to Home Assistant. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{rd__22__wifi_8h_a6d6c298c788eeb7b18a19d82a77761b3}{setup\+Network}} ()
\begin{DoxyCompactList}\small\item\em Connect to the Home Assistant access point. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{rd__22__wifi_8h_ab59433792d0c66f5863aff6b77069863}{network\+Scan}} ()
\begin{DoxyCompactList}\small\item\em Measure the RSSI of the Home Assistant access point. \end{DoxyCompactList}\item 
String \mbox{\hyperlink{rd__22__wifi_8h_a7f6ad1fbb8ddfbceb2416ca94574252a}{get\+Ip}} ()
\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{rd__22__wifi_8h_a7f6ad1fbb8ddfbceb2416ca94574252a}\label{rd__22__wifi_8h_a7f6ad1fbb8ddfbceb2416ca94574252a}} 
\index{rd\_22\_wifi.h@{rd\_22\_wifi.h}!getIp@{getIp}}
\index{getIp@{getIp}!rd\_22\_wifi.h@{rd\_22\_wifi.h}}
\doxysubsubsection{\texorpdfstring{getIp()}{getIp()}}
{\footnotesize\ttfamily String get\+Ip (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\mbox{\Hypertarget{rd__22__wifi_8h_ab59433792d0c66f5863aff6b77069863}\label{rd__22__wifi_8h_ab59433792d0c66f5863aff6b77069863}} 
\index{rd\_22\_wifi.h@{rd\_22\_wifi.h}!networkScan@{networkScan}}
\index{networkScan@{networkScan}!rd\_22\_wifi.h@{rd\_22\_wifi.h}}
\doxysubsubsection{\texorpdfstring{networkScan()}{networkScan()}}
{\footnotesize\ttfamily int network\+Scan (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Measure the RSSI of the Home Assistant access point. 

Received Signal Strength Indicator (RSSI) is the measurement of how strong the signal of a router or access point is to a device. The RSSI is a value between -\/100 and 0. Close to 0 means a better connection

There is no connection to the access point. We search the index of the desired network and we measure the RSSI.

\begin{DoxyReturn}{Returns}
int RSSI, a value between -\/100 and 0 
\end{DoxyReturn}
\mbox{\Hypertarget{rd__22__wifi_8h_a433a2bfe9f984e7dbd6e66f7a251852d}\label{rd__22__wifi_8h_a433a2bfe9f984e7dbd6e66f7a251852d}} 
\index{rd\_22\_wifi.h@{rd\_22\_wifi.h}!post@{post}}
\index{post@{post}!rd\_22\_wifi.h@{rd\_22\_wifi.h}}
\doxysubsubsection{\texorpdfstring{post()}{post()}}
{\footnotesize\ttfamily void post (\begin{DoxyParamCaption}\item[{String}]{sensor\+Val,  }\item[{String}]{name,  }\item[{String}]{unit }\end{DoxyParamCaption})}



doxygen 

const String\& sensor\+Val

doxygen

This will be an individual entity that can display one value. One sensor will need multiple Posts if it measures more than one value.

We always check the HTTP response of the POST. If the response is -\/1 we don\textquotesingle{}t have a connection to Home Assistant. If this happens we reset the node.


\begin{DoxyParams}{Parameters}
{\em sensor\+Val} & Value of the measurement \\
\hline
{\em name} & Entity ID used in Home Assistant \\
\hline
{\em unit} & Unit of measurement \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{rd__22__wifi_8h_a6d6c298c788eeb7b18a19d82a77761b3}\label{rd__22__wifi_8h_a6d6c298c788eeb7b18a19d82a77761b3}} 
\index{rd\_22\_wifi.h@{rd\_22\_wifi.h}!setupNetwork@{setupNetwork}}
\index{setupNetwork@{setupNetwork}!rd\_22\_wifi.h@{rd\_22\_wifi.h}}
\doxysubsubsection{\texorpdfstring{setupNetwork()}{setupNetwork()}}
{\footnotesize\ttfamily void setup\+Network (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Connect to the Home Assistant access point. 

When we are the root we need to send Post requests. We need to connect to the access point to be able to do this. why delay (do some research)\mbox{\Hypertarget{rd__22__wifi_8h_aa400750636d4d4831176d9358a10ad2b}\label{rd__22__wifi_8h_aa400750636d4d4831176d9358a10ad2b}} 
\index{rd\_22\_wifi.h@{rd\_22\_wifi.h}!splitJson@{splitJson}}
\index{splitJson@{splitJson}!rd\_22\_wifi.h@{rd\_22\_wifi.h}}
\doxysubsubsection{\texorpdfstring{splitJson()}{splitJson()}}
{\footnotesize\ttfamily void split\+Json (\begin{DoxyParamCaption}\item[{String}]{json }\end{DoxyParamCaption})}



Split the received JSON in individual measurements so we can POST them to Home Assistant. 


\begin{DoxyParams}{Parameters}
{\em json} & JSON input we want to split up \\
\hline
\end{DoxyParams}
